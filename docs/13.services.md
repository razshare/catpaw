# Services


A class annotated with the `\CatPaw\Attributes\Service` attribute is a [singleton](https://en.wikipedia.org/wiki/Singleton_pattern) which benefits from dependency injections.<br/>
Services themselves are injectable dependencies.


Services are the building blocks of `catpaw-core`, whenever possible, classes should be converted into services, requiring their dependencies through the `__construct` method or [entry method](https://github.com/tncrazvan/catpaw-core/blob/main/docs/5.entry.md).


The following are 2 bare services and a 3rd one requiring them.

```php
namespace App;

use CatPaw\Attributes\Service;

#[Service]
class ServiceA {
    public function myMethod():bool{
        // ...
    }
}
```

```php
namespace App;

use CatPaw\Attributes\Service;

#[Service]
class ServiceB {
    public function myMethod():bool{
        // ...
    }
}
```

```php
namespace App;

use CatPaw\Attributes\Service;

#[Service]
class ServiceC {
    public function _construct(
        private ServiceA $serviceA,
        private ServiceB $serviceB,
    ){}

    public function doSomething():bool{
        if($this->serviceA->myMethod())
            return $this->serviceB->myMethod();

        return false;
    }
}
```

> **Note**
>
>Libraries and default singletons are loaded through `\CatPaw\Container::load(string, bool):array`.
>
> If you're using the default `bin/start` startup script everything is handled for you automatically, no need for any setup.
> 
> If instead you don't want to use the default startup script you will need to call `\CatPaw\Container::load(string, bool):array` yourself.<br/>
> Here's an example:<br/>
> 
> ```php
> async(function(){
>     /**
>      *  $scannedFiles will contain a list of all the files that have been scanned.
>      */
>     $scannedFiles = Container::load(
>         path: \realpath('./src/lib'),
>         append: false,
>     );
>     
>     // From this point on you can inject services 
>     // in `\CatPaw\Container::run(callable)` and in your 
>     // classes located in `./src/lib`.
>     \CatPaw\Container::run(function(MyService $service){
>         $service->todo();
>     });
> })
> ```