This feature ships with the `catpaw/svelte-starter` template, which you can use by running<br/>
```
composer create-project catpaw/svelte-starter
```
<hr/>

# SPA

The `catpaw-web` library ships with a [default 404 event handler](./3.WebPathNotFound.md) which will default to an `./index.html` file when a specific route or file is not found, effectively enabling and `SPA mode` for your application.<br/>

On top of this default behaviour, the library provides the `CatPaw\Web\Utilities\SPA` abstract class, which can be extended in order to expose states for your SPA.<br/>

On the client side, you can use `import { StatefulRoute } from '@catpaw'` in order to manage such state.

### StatefulRoute example

Server side:
```php
<?php

namespace App\Pages;

use CatPaw\Web\Attributes\Path;


use CatPaw\Web\Utilities\SPA;

#[Path("/")]
class HomePage extends SPA {
    protected function setState(array $state, array &$session):void {
        $session['state'] = $state;
    }

    protected function getState(callable $id, array &$session): array {
        $session['state'] = [
            "clicks"  => 0,
            ...($session['state'] ?? [])
            
        ];
        
        return $session['state'];
    }
}
```

In `main.svelte`
```svelte
<script lang="ts">
  import { StatefulRoute } from '@catpaw'
  import { HomePage, NotFoundPage } from '@pages'
  import { Route, Router } from 'svelte-routing'
</script>

<Router>
  <StatefulRoute path="/" component={HomePage} />
  <Route path="*" component={NotFoundPage} />
</Router>
```

In `@pages/HomePage`
```svelte
<script lang="ts">
  import type { Writable } from 'svelte/store'
  export let state: Writable<{
    clicks: number
  }>
</script>

<button
    class="btn"
    on:click={() => $state.clicks++
}>
    <span>Click me</span>
</button>
<br/>
clicks: {$state.clicks}
```