This feature requires the package `catpaw/web`, which can be installed using<br/>
```
composer require catpaw/web
```
<hr/>

# Open API

The web server comes with an open api scanner by default which can be found in the `\CatPaw\Web\Services\OpenAPIService` service.

The service will automatically document your endpoints as you're creating them (through route handlers, controllers or file system routes).

In order to obtain the resulting open api json you can use the method `OpenAPIService::getData`.

```php
use 

Route::get('/test', #[Produces("text/plain")] function(){
    return "this is a test";
});
```

The above definition will produce the following json:

```json
{
    "openapi": "3.0.0",
    "info": {
        "title": "OpenAPI",
        "version": "0.0.1"
    },
    "paths": {
        "/test": {
            "get": {
                "summary": "",
                "operationId": "fab75b617f6e066250e96d3501d4406aa5c25170",
                "parameters": [],
                "requestBody": {
                    "description": "This is the body of the request",
                    "required": true,
                    "content": []
                },
                "responses": []
            }
        }
    }
}
```

Additional paths will be appended to the json structure.

# Documenting parameters

Parameters are documented automatically when injected but you can also add some extra information like summaries and examples.

An example:

```php
Route::get(
    '/test/{value}', 
    #[Produces("text/plain")]
    function(
        #[Summary('this is a summary of the parameter')]
        #[Example('example value')]
        #[Param]
        string $value
    ){
        return "this is a test and the value is: $value";
    }
);
```

And the json output:

```json
{
    "openapi": "3.0.0",
    "info": {
        "title": "OpenAPI",
        "version": "0.0.1"
    },
    "paths": {
        "/test/{value}": {
            "get": {
                "summary": "",
                "operationId": "545b1c009454bc6571bd6f4f5a2ee8ed25b012bd",
                "parameters": [{
                    "name": "value",
                    "in": "path",
                    "description": "",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "examples": []
                }],
                "requestBody": {
                    "description": "This is the body of the request",
                    "required": true,
                    "content": []
                },
                "responses": []
            }
        }
    }
}
```