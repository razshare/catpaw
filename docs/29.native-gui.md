Tools to create native graphical user interfaces are available.


> [!CAUTION]
> This feature is experimental and is subject to changes.


This library only provides some primitives necessary to do some experiments, it is not a properly organized library yet.\
All necessary primitives will be available in the future and organized into a coherent _"php-like"_ library and possibly with some attribute helpers to create Guis in a declarative manner.

# Basic example

> [!NOTE]
> This feature is based on [goffi](./28.goffi.md),
> this means you will need [Go](https://go.dev/) installed on your machine.


- First create a CatPaw project using the basic starter template
  ```sh
  composer create-project catpaw/starter starter && \
  cd starter
  ```
- If you've already got a project, remember to update your dependencies
  ```sh
  composer update
  ```
- Now you need to compile the native gui library.\
  The following will copy the gui library and build it into your `src/lib/gui` directory
  ```sh
  cp -fr vendor/catpaw/catpaw/src/lib/Gui/lib src/lib/gui &&\
  pushd src/lib/gui &&\
  go build -o main.so -buildmode=c-shared main.go &&\
  cpp -P ./main.h ./main.static.h &&\
  popd
  ```
  It will take a while the first time you build it.

Now all you have to do is use the library through [goffi](./28.goffi.md).

Write the following program in your _src/main.php_ file.

```php
<?php
use function Amp\delay;
use function CatPaw\Core\asFileName;
use function CatPaw\Core\error;
use function CatPaw\Core\goffi;
use CatPaw\Gui\Contract;


function main() {
    $lib = goffi(Contract::class, asFileName(__DIR__, './lib/gui/main.so')->withPhar())->try($error);
    if ($error) {
        return error($error);
    }


    $lib->application();

    $window = $lib->window();
    $lib->window_set_title($window, "hello world");
    $lib->window_set_minimum_size($window, 360, 520);

    $status_bar = $lib->status_bar($window);
    $lib->window_set_status_bar($window, $status_bar);

    $scene = $lib->scene();
    $view  = $lib->view();

    $lib->scene_match_window($scene, $window);


    // ==== START ADDING STUFF ====

    // TEXT
    $text = $lib->text($scene, "hello world");
    $lib->text_set_position($text, 0, 0);

    // BUTTON
    $button = $lib->button("This is a button that doesn't work... yet.");
    $proxy  = $lib->button_add_to_scene($button, $scene);
    $lib->proxy_widget_set_position($proxy, 0, 50);

    // ==== END ADDING STUFF ====

    $lib->view_set_scene($view, $scene);
    $lib->view_show($view);

    $lib->status_bar_show_message($status_bar, "this is a status bar");

    $lib->window_set_central_view($window, $view);

    $lib->application_set_style("fusion");
    $lib->window_show($window);
    $lib->application_execute();

    echo "Started\n";
    while (true) {
        echo "looping...\n";
        delay(10);
    }
}
```

Build the program
  ```sh
  composer prod:build
  ```

Then run it
```sh
php app.phar
  ```

> [!NOTE]
> This will dump the shared object and the header file to the current directory and use them.\
> Technically you could replace the 2 files and inject different code to execute.


The result will look something like this
![Peek 2024-03-17 16-40](https://github.com/tncrazvan/catpaw/assets/6891346/a39f0bae-3ea4-440e-bf07-498a1a5d117c)

