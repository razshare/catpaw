# Superstyle

Superstyle allows you to use just CSS to define your whole GUI.

Since CSS' new nesting features have been introduced, it is now possible to completely describe the structure of a DOM tree by using only CSS.

Obviously browsers won't automatically parse you CSS and create your DOM tree, but the server can just the necessary parts and extract tag names and attributes from the css code and generate a DOM tree on the fly.

It's important to note that Superstyle doesn't have (and will probably never have) the capability to parse CSS rules, so it won't provide any details regarding the actual CSS rules within the CSS selectors.\
It is just a thin layer which simply converts CSS selectors into HTML tags, with the exception of one single CSS rule, which is `content: "my-content"` the content rule. More on this below.


## Usage

Create a handlebars file, for example under _src/api/view.hbs_, in that files declare a style tag with the attribute `is="super"`

```hbs
<style is="super">
    main {
        ul {
            position: relative;
            {{#each items}}
                li {
                    content: "{{.}}";
                }
            {{/each}}
        }
    }
</style>
```
The style sheet must always declare a `main` element which will contain your application.

Then create your route handler, for example in _src/api/get.php_

```php
<?php
use function CatPaw\Superstyle\superstyle;
use function CatPaw\Core\asFilename;

return function(){
    return
        superstyle(asFileName(__DIR__, 'view.hbs'))
        ->setProperty('items', [
            "item-1",
            "item-2",
            "item-3",
            "item-4",
        ])
        ->render();
};
```

The _\$fileName_ is not required to be absolute, however your application's _cwd_ (current working directory) is always at the root of the project, so passing _"./view.hbs"_ as _\$fileName_ won't work, unless you change your application's _cwd_ to _\_\_DIR___.

For that reason, the code above is using _asFileName()_ to properly join _\_\_DIR___ and _"view.hbs"_ into an absolute path.

> [!NOTE]
> These files you're passing into _superstyle($fileName)_ are getting compiled into pure php functions the first time they're being rendered.\
> This means the first time they're being rendered they will be loaded from disk.\
> Subsequent rendering requests will invoke the already existing php functions to render the same thing.\
> This caching is done based on the file's name.\
> If you want to clear the cache you will have to do it manually by deleting the `.tmp/handlebars` directory, which is at the root of your project.

> [!NOTE]
> Although handlebars compiles your templates into php functions, the Superstyle interpreter is still executed at runtime\
> This is temporary and may change in the future to completely remove any superstyle parsing overhead (except for the initial parsing of course, that will always remain).