# Superstyle

Superstyle allows you to use just CSS to define your whole GUI.

Since [CSS' new nesting features](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_nesting/Using_CSS_nesting) have been introduced, it has become possible to completely describe the structure of a DOM tree by using only CSS.

Obviously browsers don't have this native capability, and this is where Superstyle comes into play.

It's important to note that Superstyle doesn't have (and will probably never have) the capability to parse CSS rules, so it cannot provide any specific details regarding the actual CSS rules within the CSS selectors.\
It is just a thin layer which simply converts CSS selectors into HTML tags with their relative attributes.\
The only exception to this rule (no pun intended), is the `content` rule, which is parsed as the `innerText` of the element it is attached on to.


## Usage

First of al create a route handler and serve your superstyle document.

```php
<?php
// src/api/get.php
use function CatPaw\Superstyle\superstyle;
use function CatPaw\Core\asFilename;

return function(){
    return
        superstyle(asFileName(__DIR__, 'view.hbs'))
        ->setProperty('label', 'Click me!')
        ->render();
};
```



Then create the `view.hbs` file.

> [!NOTE]
> Yes, it's a Handlebars file, but not exactly!\
> More on this in the next sub section.

```hbs
<!-- src/api/view.hbs -->
<style is="super">
    main {
        font-family: 'Courier New', Courier, monospace;
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        display: grid;
        background: #000000;

        button {
            content: "{{label}}";
            border: 0;
            font-size: 1.3rem;
            justify-self: center;
            align-self: center;
            background: rgb(234, 40, 5);
            color: rgb(233, 166, 155);
            border-radius: 3rem;
            padding: 1rem;
            cursor: pointer;
            box-shadow: 0;
            transition: 200ms transform;

            &:hover {
                transform: scale(1.1);
            }

            &:active {
                box-shadow: 0;
                transform: scale(0.9);
            }
        }
    }
</style>
```

Note the ` is="super"` attribute on the style tag, that is required.

The style sheet itself must always declare a `main` element which will contain your application.

Any selector inside your `main` selector will be treated as a document node declaration.
This means that any selector within `main` is declaring specific instances of the given tag name.
If a selector doesn't specify a tag name, the tag name will default to `div`.

> [!NOTE]
> The _\$fileName_ is not required to be absolute, however your application's _cwd_ (current working directory) is always at the root of the project, so passing _"./view.hbs"_ as _\$fileName_ won't work, unless you change your application's _cwd_ to _\_\_DIR___.\
> \
> For that reason, the code above is using _asFileName()_ to properly join _\_\_DIR___ and _"view.hbs"_ into an absolute path.


The final output should looks something like this\

![Peek 2024-05-07 19-55](https://github.com/tncrazvan/catpaw/assets/6891346/9e318b01-2a72-42a6-acd9-a8c2423a8199)


## JavaScript

You can execute javascript code on your page as long as you write it in a `script` tag.

```html
<style is="super">
    main {}
</style>
<script>
    console.log("hello world")
</script>
```

This document will log `hello world` to the console whenever it loads.

## Handlebars

As you might have noticed, these are [Handlebars](https://handlebarsjs.com/) files.
Superstyle is currently using Handlebars for rendering dynamic documents.

> [!NOTE]
> There are plans to support more template systems in the future, such as Twig.

## Compilation

Templates are compiled into php functions and cached immediately the first time they render.

These php cached functions are saved into a `.tmp/handlebars` directory by default.

You can overwrite this location on the _HandlebarsService_

```php
<?php
use CatPaw\Web\Services\HandlebarsService;

function main(HandlebarsService $handlebars){
    $handlebars->withTemporaryDirectory('your/custom/tmp')
}
```
