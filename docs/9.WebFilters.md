This feature requires the package `catpaw/web`, which can be installed using<br/>
```
composer require catpaw/web
```
<hr/>

# Web Filters

Filters will reject away or permit requests before they reach the actual event handler of your http endpoint.<br/>

A filter has every capability oh a [route handler](./1.WebRouteHandlers.md), meaning it can request dependencies and return a
response.<br/>

- Whenever a filter returns a `CatPaw\Web\EventState`, the request is permitted and the [EventState (check EventState docs)](https://github.com/tncrazvan/catpaw-core/blob/main/docs/15.EventState.md) is updated.
- Whenever a filter returns `true`, the request is permitted.
- Whenever a filter doesn't return anything, the request is permitted.
- In any other case the request is filtered out and the web server will serve the result value of the filter.

Imagine that `validateToken(string $token):bool` is defined somewhere in the application:

```php
use CatPaw\Web\Utilities\Route;
use CatPaw\Web\Attributes\Produces;
use CatPaw\Web\Attributes\RequestQuery;
use Amp\Http\Server\Response;
use Amp\Http\Status;

$filter = 
          fn(
              #[RequestQuery("token")] 
              false|string $token
          ) => validateToken($token??'')??new Response(Status::FORBIDDEN,[],"Invalid token.");

$handler =
          #[Produces("text/html")] 
          fn()=> "welcome!";

Route::get("/",[$filter,$handler]);
```

This configuration will reject any request that doesn't specify the `token` query string.
